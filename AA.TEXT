<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Battery Diagnostics</title>
    <style>
        body {
            background-color: #1a1a1a;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        /* --- PHASE 1: HARMLESS UI --- */
        #safe-mode {
            text-align: center;
            width: 100%;
        }

        .battery-icon {
            font-size: 5rem;
            color: #0f0;
            margin-bottom: 20px;
        }

        .btn-optimize {
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            border: none;
            padding: 15px 50px;
            color: white;
            font-size: 1.2rem;
            border-radius: 30px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0,114,255,0.4);
            cursor: pointer;
        }

        /* --- PHASE 2: MELTDOWN UI --- */
        #danger-mode {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .temp-display {
            font-size: 6rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            color: #fff;
            text-shadow: 0 0 10px red;
        }

        .warning-text {
            color: red;
            font-size: 2rem;
            font-weight: 900;
            text-transform: uppercase;
            animation: blink 0.1s infinite;
            margin-top: 20px;
        }

        .console-log {
            font-family: monospace;
            color: #ff5555;
            font-size: 0.8rem;
            text-align: left;
            width: 80%;
            margin-top: 30px;
            height: 100px;
            overflow: hidden;
            border-top: 1px solid red;
            padding-top: 10px;
        }

        /* --- ANIMATIONS --- */
        @keyframes blink { 50% { opacity: 0; } }

        .shake-screen {
            animation: violent-shake 0.2s infinite;
        }

        @keyframes violent-shake {
            0% { transform: translate(2px, 2px) rotate(0deg); }
            25% { transform: translate(-2px, -2px) rotate(-2deg); }
            50% { transform: translate(-2px, 2px) rotate(2deg); }
            75% { transform: translate(2px, -2px) rotate(-1deg); }
            100% { transform: translate(1px, -1px) rotate(0deg); }
        }

        .flash-red {
            animation: strobe 0.15s infinite;
        }

        @keyframes strobe {
            0% { background-color: black; }
            50% { background-color: red; }
            100% { background-color: black; }
        }

        /* --- REVEAL --- */
        #reveal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #00ff41;
            color: #000;
            z-index: 99999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
    </style>
</head>
<body>

    <div id="safe-mode">
        <div class="battery-icon">üîã</div>
        <h2>Battery Health: 84%</h2>
        <p style="color:#aaa;">Optimization recommended.</p>
        <button class="btn-optimize" onclick="startMeltdown()">OPTIMIZE NOW</button>
    </div>

    <div id="danger-mode">
        <div style="font-size: 4rem;">‚ö†Ô∏è</div>
        <div class="warning-text">CRITICAL FAILURE</div>
        
        <p>BATTERY TEMPERATURE:</p>
        <div class="temp-display" id="temp-val">34¬∞C</div>

        <div class="console-log" id="log-box">
            > INITIALIZING COOLING FANS...<br>
        </div>

        <div style="margin-top: 40px; font-weight: bold; color: yellow; background: black; padding: 10px;">
            DO NOT HOLD NEAR FACE
        </div>
        
        <div onclick="stopPrank()" style="position: absolute; top: 30%; height: 100px; width: 100%; opacity: 0;"></div>
    </div>

    <div id="reveal">
        <h1 style="font-size: 4rem;">üí• BOOM! üí•</h1>
        <h2>Just kidding. Your phone is fine.</h2>
        <button onclick="location.reload()" style="padding: 15px; font-size: 1.2rem; background: black; color: white; border: none; margin-top: 20px;">Prank Again</button>
    </div>

    <script>
        let audioCtx;
        let oscillator;
        let gainNode;

        function startMeltdown() {
            // 1. Fullscreen
            document.documentElement.requestFullscreen().catch(e => {});

            // 2. Switch UI
            document.getElementById('safe-mode').style.display = 'none';
            document.getElementById('danger-mode').style.display = 'flex';

            // 3. Start Audio (The rising whine)
            initAudio();

            // 4. Start the "Heat Up" simulation
            runTemperatureScript();
        }

        function runTemperatureScript() {
            const tempDisplay = document.getElementById('temp-val');
            const logBox = document.getElementById('log-box');
            let temp = 34;

            // Loop to increase temperature
            const interval = setInterval(() => {
                temp += Math.floor(Math.random() * 3) + 1; // Add 1-3 degrees
                tempDisplay.innerText = temp + "¬∞C";

                // Vibrate patterns based on temperature
                if (navigator.vibrate) {
                    if (temp > 50) navigator.vibrate(100); // Short pulses
                    if (temp > 80) navigator.vibrate([200, 50, 200]); // Harder pulses
                    if (temp > 100) navigator.vibrate(1000); // Constant vibration
                }

                // Visual Effects based on temperature
                if (temp > 60) document.body.classList.add('shake-screen');
                if (temp > 95) document.body.classList.add('flash-red');

                // Scary logs
                if (temp === 45) log("> ERROR: COOLING FAN FAILURE", logBox);
                if (temp === 60) log("> WARNING: THERMAL RUNAWAY DETECTED", logBox);
                if (temp === 80) log("> CRITICAL: LITHIUM CORE UNSTABLE", logBox);
                if (temp === 95) log("> SYSTEM ALERT: EXPLOSION IMMINENT", logBox);
                
                // Rising pitch sound
                if (oscillator && temp < 110) {
                    oscillator.frequency.value += 30; // Pitch goes up
                }

                if (temp > 115) {
                    // "Explosion" / End
                    clearInterval(interval);
                    stopPrank();
                }

            }, 200); // Runs every 200ms
        }

        function log(msg, container) {
            container.innerHTML += msg + "<br>";
            container.scrollTop = container.scrollHeight;
        }

        // --- WEB AUDIO API (Generates the scary sound) ---
        function initAudio() {
            try {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                oscillator = audioCtx.createOscillator();
                gainNode = audioCtx.createGain();

                oscillator.type = 'sawtooth'; // Harsh sound
                oscillator.frequency.value = 100; // Start low pitch
                gainNode.gain.value = 0.3; // Volume

                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillator.start();
            } catch (e) {
                console.log("Audio error");
            }
        }

        function stopPrank() {
            document.getElementById('reveal').style.display = 'flex';
            document.body.classList.remove('flash-red');
            document.body.classList.remove('shake-screen');
            if (oscillator) oscillator.stop();
            navigator.vibrate(0);
        }
    </script>
</body>
</html>
